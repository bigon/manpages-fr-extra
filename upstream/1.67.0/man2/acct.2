.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1993 Michael Haardt
.\" (u31b3hs@pool.informatik.rwth-aachen.de),
.\" Fri Apr  2 11:32:09 MET DST 1993
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" Modified Thu Jul 22 14:00:08 1993 by Rik Faith (faith@cs.unc.edu)
.\" Modified Tue Aug 10 1993 by Alan Cox (iiitac@pyramid.swansea.ac.uk)
.\"
.\" Traduction 14/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Mise a Jour 8/04/97
.\" màj 09/04/99 LDP-man-pages 1.22
.\" màj 30/05/01 LDP-man-pages 1.36
.\" màj 15/01/02 LDP-man-pages 1.47
.\" màj 18/07/03 LDP-man-pages 1.56
.TH ACCT 2 "18 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
acct \- Activer/désactiver la comptabilité des processus.
.SH SYNOPSIS
.ad l
.nf
.B #include <unistd.h>
.sp
.BI "int acct(const char *" filename );
.fi
.ad b
.SH DESCRIPTION
Quand la fonction est appelée avec un nom de fichier existant comme
argument, la comptabilité est mise en marche, un enregistrement
étant ajouté à \fIfilename\fP à la fin de chaque processus.
Un argument \fBNULL\fP arrête la comptabilité.
.SH "VALEUR RENVOYÉE"
L'appel renvoie 0 quand il réussit, ou \-1 s'il échoue, auquel cas
.I errno
contient le code d'erreur.
.SH ERREURS
.TP
.B EACCESS
Interdiction d'écrire dans le fichier indiqué.
.TP
.B EACCESS
L'argument
.I filename
n'est pas un fichier régulier.
.TP
.B EFAULT
.I filename
pointe en dehors de l'espace d'adressage autorisé.
.TP
.B EIO
Impossible d'écrire dans le fichier
.IR filename .
.TP
.B EISDIR
.I filename
est un répertoire.
.TP
.B ELOOP
Références symboliques circulaires dans le chemin d'accès à
.IR filename .
.TP
.B ENAMETOOLONG
.I filename
est trop long.
.TP
.B ENOENT
Le nom de fichier indiqué n'existe pas.
.TP
.B ENOMEM
Pas assez de mémoire.
.TP
.B ENOSYS
Le système de comptabilité BSD n'a pas été activé lors de la compilation
du noyau.
Le paramètre de configuration du noyau contrôlant cette option
est CONFIG_BSD_PROCESS_ACCT.
.TP
.B ENOTDIR
Un composant du chemin d'accès à
.I filename
n'est pas un répertoire.
.TP
.B EPERM
L'appelant n'a pas la permission d'activer la comptabilité.
.TP
.B EROFS
.I filename
se trouve sur un système de fichiers en lecture seule.
.TP
.B EUSERS
Il n'y a plus de structures de fichiers libres, ou pas assez de mémoire.
.SH CONFORMITÉ
SVr4 (mais pas POSIX). SVr4 indique une condition d'erreur EBUSY, mais ni
EISDIR ni ENOSYS. De même AIX et HP-UX documentent EBUSY (essai d'activation
alors que la comptabilité est déjà en fonctionnement), comme Solaris (essai
d'activation de la comptabilité avec le même fichier que celui déjà en cours
d'utilisation).
.SH NOTES
Aucune comptabilisation n'est effectuée pour les programmes en cours 
d'exécution si un plantage système survient. En particulier les
processus qui ne se terminent jamais ne sont pas
comptabilisés.

.SH TRADUCTION
Christophe Blaess, 1996-2003.

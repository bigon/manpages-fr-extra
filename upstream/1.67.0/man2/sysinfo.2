.\" -*- nroff -*-
.\"
.\" (C)opyright 1993 by Dan Miner (dminer@nyx.cs.du.edu)
.\"
.\"  Permission is granted to freely distribute or modify this file
.\"  for the purpose of improving Linux or its documentation efforts.
.\"  If you modify this file, please put a date stamp and HOW you
.\"  changed this file.  Thanks.   -DM
.\"
.\" Modified Sat Jul 24 12ai:35:12 1993 by Rik Faith (faith@cs.unc.edu)
.\"
.\" Traduction 15/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Mise a Jour 15/04/97
.\" Mise à jour 12/12/1998 - LDP-man-pages-1.21
.\" Mise à jour 27/06/2000 - LDP-man-pages-1.30
.\" Mise à jour 18/07/2003 - LDP-man-pages-1.56
.TH SYSINFO 2 "18 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
sysinfo \- Obtenir des informations statistiques sur le système.
.SH SYNOPSIS
.B #include <sys/sysinfo.h>
.sp
.BI "int sysinfo(struct sysinfo *" info );
.SH DESCRIPTION
Jusqu'au noyau 2.3.16,
.B sysinfo
renvoyait les informations dans la structure suivante\ :

.RS
.nf
struct sysinfo {
  long uptime;             /* Secondes écoulées depuis le boot.*/
  unsigned long loads[3];  /* Charges depuis 1, 5, et 15 mn.   */
  unsigned long totalram;  /* Mémoire totale du système.       */
  unsigned long freeram;   /* Mémoire disponible.              */
  unsigned long sharedram; /* Mémoire partagée.                */
  unsigned long bufferram; /* Mémoire utilisée par les buffers */
  unsigned long totalswap; /* Taille totale du swap.           */
  unsigned long freeswap;  /* Espace disponible dans le swap.  */
  unsigned short procs;    /* Nombre de processus actuels.     */
  char          _f[22];    /* Remplissage jusqu'à 64 octets.   */
};
.fi
.RE

et les tailles étaient fournies en octets. Depuis le noyau 2.3.23 (i386) et
2.3.48 (toutes architectures), la structure est devenue :

.RS
.nf
struct sysinfo {
  long uptime;             /* Secondes écoulées depuis le boot.*/
  unsigned long loads[3];  /* Charges depuis 1, 5, et 15 mn.   */
  unsigned long totalram;  /* Mémoire totale du système.       */
  unsigned long freeram;   /* Mémoire disponible.              */
  unsigned long sharedram; /* Mémoire partagée.                */
  unsigned long bufferram; /* Mémoire utilisée par les buffers */
  unsigned long totalswap; /* Taille totale du swap.           */
  unsigned long freeswap;  /* Espace disponible dans le swap.  */
  unsigned short procs;    /* Nombre de processus actuels.     */
  unsigned long totalhigh; /* Taille totale mémoire haute.     */
  unsigned long freehigh;  /* Taille mémoire haute libre.      */
  usigned int   mem_unit;  /* Taille de bloc mémoire en octets */
  char _f [20 - 2*sizeof(long) - sizeof(int)];  /* remplissage */
};
.fi
.RE

et les tailles sont indiqués sous forme de multiples de \fImem_unit\fP.

.B sysinfo
permet d'obtenir facilement des statistiques systèmes. C'est
plus portable que la lecture de \fI/dev/kmem\fP.
Pour avoir un exemple d'utilisation, reportez-vous à
.BR intro (2).
.SH "VALEUR RENVOYÉE"
.B sysinfo
renvoie 0 s'il réussit et \-1 s'il échoue auquel cas
.I errno
contient le code d'erreur.
.SH ERREURS
.TP
.B EFAULT
\fIstruct\ sysinfo\fP pointe en dehors de l'espace d'adressage accessible.
.SH "CONFORMITÉ"
Cette fonction est spécifique Linux et ne doit pas être employée dans des
programmes destinés à être portables.
.sp
Le noyau Linux dispose d'un appel-système \fBsysinfo\fP depuis la version
0.98pl6. La bibliothèque libc de Linux contient une routine \fBsysinfo\fP()
depuis la version 5.3.5, et la bibliothèque glibc depuis 1.90.
.SH "VOIR AUSSI"
.BR proc (5)
.SH TRADUCTION
Christophe Blaess, 1996-2003.

.\" Copyright (c) 1980, 1991 Regents of the University of California.
.\" All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"     @(#)ioctl.2	6.4 (Berkeley) 3/10/91
.\"
.\" Modified Fri Jul 23 21:38:19 1993 by Rik Faith (faith@cs.unc.edu)
.\"
.\"
.\" Traduction  10/10/1996 Christophe BLAESS (ccb@club-internet.fr)
.\" Màj 08/04/1997
.\" Màj 30/05/2001 LDP-1.36
.\" Màj 18/07/2003 LDP-1.56
.\" Màj 23/12/2005 LDP-1.67
.\"
.TH IOCTL 2 "18 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
ioctl \- Contrôler les périphériques.
.SH SYNOPSIS
.B #include <sys/ioctl.h>
.sp
.BI "int ioctl(int " d ", int " requête ", ...);"
.SH DESCRIPTION
La fonction
.B ioctl
modifie le comportement des périphériques sous-jacents des fichiers spéciaux.
En particulier, de nombreuses caractéristiques des fichiers spéciaux en mode
caractère (par exemple des terminaux) peuvent être contrôlées avec des requêtes
.BR ioctl .
L'argument
.I d
doit être un descripteur de fichier ouvert.
.PP
Le second argument est le code de la requête dépendant du périphérique. Le
troisième argument est un pointeur non typé. Il est traditionnellement défini en
.BR "char *" argp
(ceci date de l'époque avant que
.B "void *"
soit du C valide), et sera ainsi nommé dans le reste de cette page.
.PP
Une
.I requête
ioctl encapsule le fait que l'argument est un paramètre
.I d'entrée
ou de
.I sortie
ainsi que la taille de l'argument
.I argp
en octets. Les macros et constantes symboliques décrivant les
.I requêtes
ioctl se trouvent dans le fichier
.IR sys/ioctl.h .
.SH "VALEUR RENVOYÉE"
En principe,
.BR ioctl
renvoie 0 s'il réussit, ou \-1 s'il échoue. Certaines requêtes
ioctl utilisent la valeur de retour comme paramètre de sortie, et
renvoient une valeur positive si elles réussissent (et \-1 pour les erreurs).
En cas d'échec,
.I errno
contient le code d'erreur.
.SH ERREURS
.TP 0.7i
.B EBADF
.I d
n'est pas un descripteur de fichier valide.
.TP
.B EFAULT
.I argp
pointe en dehors de l'espace d'adressage valide.
.TP
.B ENOTTY
.I d
n'est pas associé avec un fichier spécial en mode caractère.
.TP
.B ENOTTY
La requête spécifiée ne s'applique pas au type d'objet associé avec
le descripteur
.IR d .
.TP
.B EINVAL
La
.I requête
ou l'argument
.I argp
n'est pas valide.
.SH NOTE
Pour utiliser cet appel, on a besoin d'un descripteur de fichier ouvert.
Souvent, l'appel
.BR open (2)
a des effets de bord non désirés, qui peuvent être éviter sous Linux
en lui passant le drapeau O_NONBLOCK.
.SH CONFORMITÉ
Pas de vrai standard. Les arguments, les valeurs de retour, et la sémantique
des
.BR ioctl (2)
varient en fonction du périphérique concerné (cet appel-système est utilisé
pour encapsuler les opérations qui ne se conforment pas bien au modèle Unix des
entrées/sorties par flux). Voir
.BR ioctl_list (2)
pour une liste des principaux appels
.B ioctl
connus. La fonction
.B ioctl
est apparue dans l'Unix d'AT&T Version 7.
.SH "VOIR AUSSI"
.BR execve (2),
.BR fcntl (2),
.BR ioctl_list (2),
.BR open (2),
.BR mt (4),
.BR sd (4),
.BR tty (4)
.SH TRADUCTION
Christophe Blaess, 1996-2003.

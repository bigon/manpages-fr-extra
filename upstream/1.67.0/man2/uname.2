.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1992 Drew Eckhardt (drew@cs.colorado.edu), March 28, 1992
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Modified by Michael Haardt (u31b3hs@pool.informatik.rwth-aachen.de)
.\" Modified Sat Jul 24 12:53:43 1993 by Rik Faith (faith@cs.unc.edu)
.\"
.\" Traduction 15/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Mise a Jour 15/04/97
.\" màj 26/06/2000 LDP 1.30
.\" màj 18/07/2003 LDP 1.56
.TH UNAME 2 "18 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
uname \- Obtenir des informations à propos du noyau.
.SH SYNOPSIS
.B #include <sys/utsname.h>
.sp
.BI "int uname(struct utsname *" buf );
.SH DESCRIPTION
.B uname
renvoient les informations dans le buffer
.IR buf .
la structure 
.I utsname 
est définie dans
.I <sys/utsname.h>
comme suit :
.RS
.nf
struct utsname {
.in +8
char sysname[];
char nodename[];
char release[];
char version[];
char machine[];
.in -8
#ifdef _GNU_SOURCE
.in +8
char domainname[];
.in -8
#endif
};
.fi
.RE
La longueur des chaînes de la
.I struct utsname
n'est pas spécifiée, les champs se terminent par un caractère NUL.
.SH "VALEUR RENVOYÉE"
.B uname
renvoie 0 s'il réussit ou \-1 s'il échoue auquel cas
.I errno
contient le code d'erreur.
.SH ERREURS
.TP
.B EFAULT
.I buf
pointe en dehors de l'espace d'adressage accessible
.SH "CONFORMITÉ"
SVr4, SVID, POSIX, X/OPEN.
Il n'y a pas d'appel
.B uname
dans BSD 4.3.
.PP
Le champ
.I domainname
(nom de domaine NIS ou YP) est une extension Gnu.
.SH NOTES
Ceci est un appel système, et le système d'exploitation est supposé connaître
son nom, et ses numéros de version et de mise à jour. Il connaît également le matériel
sur lequel il tourne, ainsi les quatre premiers champs de la structures sont significatifs.
En revanche, le champ \fInodename\fP n'est pas significatif\ :
il donne le nom de la machine dans un réseau non précisé, mais généralement
les machines sont connectées à plusieurs réseaux et ont plusieurs noms.
De plus, le noyau n'a pas de moyen de connaître ces informations, et on doit
les lui fournir. Ceci est vrai aussi pour le champ supplémentaire
\fIdomainname\fP.
.LP
A cette fin, Linux utilise les appels système
.BR sethostname (2)
et
.BR setdomainname (2).
Notez qu'aucun standard ne dit que le nom d'hôte fixé par
.BR sethostname (2)
représente la même chaîne que le champ \fInodename\fP de la structure
renvoyée par uname,
(de fait, certains systèmes autorise un nom d'hôte de 256 octets et un nom
de noeud sur 8 octets), mais c'est le cas sous Linux.
La même chose est vraie pour
.BR setdomainname (2)
et le champ \fIdomainname\fP.
.LP
La longueur des champs de la structure varie. Certains systèmes d'exploitation
ou bibliothèques utilise des valeurs en dur de 9, 33, 65, ou 257. D'autres systèmes
utilisent SYS_NMLN, _SYS_NMLN, UTSLEN ou _UTSNAME_LENGTH.
Clairement, il faut éviter d'utiliser ces constantes, employez plutôt sizeof(...).
On choisit souvent la valeur 257 qui permet de stocker un nom d'hôte Internet entier.
.LP
Il y a eu trois appels système \fIuname\fP sous Linux. Le premier utilisait
une longueur de 9, le second de 65 et le troisième utilise également 65
mais ajoute le champ \fIdomainname\fP.
.LP
Une partie des informations utsname est aussi accessible par
.I sysctl
et par
.IR /proc/sys/kernel/ { ostype ,
.IR hostname ,
.IR osrelease ,
.IR version ,
.IR domainname }.
.SH "VOIR AUSSI"
.BR uname (1),
.BR getdomainname (2),
.BR gethostname (2)
.SH TRADUCTION
Christophe Blaess, 1996-2003.

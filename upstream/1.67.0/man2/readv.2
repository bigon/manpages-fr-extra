.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (c) 1996 Tom Bjorkholm <tomb@mydata.se>
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" 1996-04-12 Tom Bjorkholm <tomb@mydata.se>
.\"            First version written
.\"
.\" Traduction 14/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Mise a Jour 08/04/1997
.\" Mise a Jour 19/07/1997
.\" Mise a Jour 18/05/1999 - LDP-man-pages-1.23
.\" Mise a Jour 20/01/02 - LDP-man-pages-1.47
.\" Mise a Jour 18/07/03 - LDP-man-pages-1.56
.TH READV 2 "18 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
readv, writev \- Lire ou écrire dans plusieurs buffers.
.SH SYNOPSIS
.nf
.B #include <sys/uio.h>
.sp
.BI "int readv(int " fd ", const struct iovec * " vecteur ", int " nb );
.sp
.BI "int writev(int " fd ", const struct iovec * " vecteur ", int " nb );
.fi
.SH DESCRIPTION
La fonction
.BR readv ()
lit
.I nb
blocs depuis le descripteur de fichier
.I fd
dans les multiples buffers décrits par le
.IR vecteur .
.PP
La fonction
.BR writev ()
écrit au plus
.I nb
blocs décrits par le
.IR vecteur
dans le fichier associé au descripteur
.IR fd .
.PP
Le
.I vecteur
pointe sur une
.B "struct iovec"
définie dans
.B <sys/uio.h>
ainsi\ :
.PP
.br
.nf 
.in 10 
struct iovec {
.in 14
void *iov_base;   /* Adresse de début */
size_t iov_len;   /* Nombre d'octets  */
.in 10
};
.fi
.PP
Les buffers sont traités dans l'ordre indiqué.
.PP
La fonction
.BR readv ()
travaille comme
.BR read (2)
sauf que plusieurs buffers sont remplis.
.PP
La fonction
.BR writev ()
travaille comme
.BR write (2)
sauf que plusieurs buffers sont écrits.
.PP
.SH "VALEUR RENVOYÉE"
S'ils réussissent
.BR readv
renvoie le nombre d'octets lus et
.BR writev
renvoie le nombre d'octets écrits.
En cas d'échec \-1 est renvoyé, et
.I errno
contient le code d'erreur.
.SH ERREURS
Les erreurs indiquées pour
.BR read (2)
et
.BR write (2à
sont susceptibles de se produire.
De plus il peut survenir\ :
.TP
.B EINVAL
La somme des
.I iov_len
valeurs déborde du type
.BR ssize_t ,
ou le nombre
.I nb
de vecteur est nul ou supérieur à
.BR MAX_IOVEC .
.SH CONFORMITÉ
BSD 4.4 (les fonctions
.BR readv
et
.BR writev
sont apparues dans BSD 4.2), Unix98. La libc5 de Linux utilisait
les types
.B size_t
pour le paramètre
.I count
et
.B int
en retour de ces fonctions.
.SH BOGUES
Il est déconseillé de mélanger les appels
.BR readv ()
ou
.BR writev ()
qui agissent sur les descripteurs avec les fonctions de la bibliothèque
stdio\ ; les résultats sont indéfinis et probablement différents de ce que
l'on attend
.SH "VOIR AUSSI"
.BR read (2),
.BR write (2)
.SH TRADUCTION
Christophe Blaess, 1996-2003.

.\" Copyright (c) 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)daemon.3	8.1 (Berkeley) 6/9/93
.\" Added mentioning of glibc weirdness wrt unistd.h. 5/11/98, Al Viro
.\" Traduction 30/08/2000 par Christophe Blaess (ccb@club-internet.fr)
.\" LDP 1.30
.\" Màj 25/01/2002 LDP-1.47
.\" Màj 21/07/2003 LDP-1.56
.\" Màj 14/12/2005 LDP-1.65
.\"
.TH DAEMON 3 "21 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
daemon \- Exécution en arrière-plan.
.SH SYNOPSIS
.B #include <unistd.h>
.sp
.BI "int daemon (int " nochdir ", int " noclose);
.SH DESCRIPTION
La fonction
.BR daemon ()
sert aux programmes désireux de se détacher de leur terminal de contrôle, et
de s'exécuter en arrière plan à la manière des démons système.
.PP
Si l'argument
.I nochdir
vaut zéro,
.BR daemon ()
modifie le répertoire de travail pour revenir à la racine («\ /\ »).
Ceci évite de bloquer un système de fichiers (comme /home)
que l'on ne pourrait pas démonter durant son exécution.
.PP
Si l'argument
.I noclose
vaut zéro,
.BR daemon ()
redirige l'entrée standard, la sortie standard,
et la sortie d'erreur vers \fI/dev/null\fP.
.SH "VALEUR RENVOYÉE"
(Cette fonction exécute un
.BR fork() ,
et s'il réussit, le père effectue un
.\" pas .IR pour ne pas souligner _
.BR _exit (0),
ainsi toutes les erreurs éventuelles apparaissent uniquement
du côté fils).
La fonction
.BR daemon ()
renvoie zéro si elle réussit.
Si une erreur se produit,
.BR daemon ()
renvoie -1 et remplit la variable globale
.I errno
avec l'un des code d'erreurs renvoyés par les fonctions
.BR fork (2)
et
.BR setsid (2).
.SH "VOIR AUSSI"
.BR fork (2),
.BR setsid (2)
.SH NOTES
L'implémentation de la GlibC peut également renvoyer \-1 si
.I /dev/null
existe mais n'est pas un noeud spécial en mode caractère, avec
les numéros mineur et majeur attendus. Dans ce cas,
.I errno
ne sera pas remplie.
.SH HISTORIQUE
La fonction
.BR daemon ()
est apparue en premier dans BSD4.4.
.SH TRADUCTION
Christophe Blaess, 2000-2003.

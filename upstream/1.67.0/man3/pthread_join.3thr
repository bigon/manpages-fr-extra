.TH PTHREAD_JOIN 3 "21 juillet 2003" LinuxThreads "Manuel du programmeur Linux"

.SH NOM
pthread_join \- attend la fin d'un autre thread

.SH SYNOPSIS
.B #include <pthread.h>

.BI "int pthread_join(pthread_t " th ", void **" thread_return ");"

.SH DESCRIPTION
.B "pthread_join"
suspend l'exécution du thread appelant jusqu'à ce que le thread identifié par
.I "th"
achève son exécution, soit en appelant
.BR "pthread_exit" (3)
soit après avoir été annulé.

Si 
.I "thread_return"
ne vaut pas
.BR "NULL" ,
la valeur renvoyée par
.I "th"
y sera enregistrée.
Cette valeur sera soit l'argument passé à
.BR "pthread_exit" (3),
soit
.B "PTHREAD_CANCELED"
si le thread
.I "th"
a été annulé.

Le thread rejoint 
.B "th"
doit être dans l'état joignable\ : il ne doit pas avoir été détaché par
.BR "pthread_detach" (3)
ou par l'attribut 
.B "PTHREAD_CREATE_DETACHED"
lors de sa création par
.BR "pthread_create" (3).

Quand l'exécution d'un thread joignable s'achève, ses ressources mémoire
(descripteur de thread et pile) ne sont pas désallouées jusqu'à ce qu'un autre
thread le joigne en utilisant \fBpthread_join\fP. Aussi,
.B "pthread_join"
doit être appelée une fois pour chaque thread joignable pour éviter des
"fuites" de mémoire.

Au plus un seul thread peut attendre la mort d'un thread donné. Appeler
.B "pthread_join"
sur un thread
.I "th"
dont un autre thread attend déjà la fin renvoie une erreur.

.SH ANNULATION

.B "pthread_join"
est un point d'annulation. Si un thread est annulé alors qu'il est suspendu
dans
.BR "pthread_join" ,
l'exécution du thread reprend immédiatement et l'annulation est réalisée sans
attendre la fin du thread \fIth\fP.
Si l'annulation intervient durant
.BR "pthread_join" ,
le thread
.I "th"
demeure non joint.

.SH "VALEUR RENVOYÉE"
En cas de succès, le code renvoyé par
.I "th"
est enregistré à l'emplacement pointé par
.IR "thread_return" ,
et 0 est renvoyé. En cas d'erreur, un code d'erreur non nul est renvoyé.

.SH ERREURS
.TP
.B "ESRCH"
Aucun thread correspondant à
.IR "th"
n' a pu être trouvé.
.TP
.B "EINVAL"
Le thread
.I "th"
a été détaché.
.TP
.B "EINVAL"
Un autre thread attend déjà la mort de
.IR "th" .
.TP
.B "EDEADLK"
L'argument
.I "th"
représente le thread appelant.

.SH AUTEUR
Xavier Leroy <Xavier.Leroy@inria.fr>

.SH "VOIR AUSSI"
.BR "pthread_exit" (3),
.BR "pthread_detach" (3),
.BR "pthread_create" (3),
.BR "pthread_attr_setdetachstate" (3),
.BR "pthread_cleanup_push" (3),
.BR "pthread_key_create" (3).
.SH TRADUCTION
.RI "Thierry Vignaud <" tvignaud@mandrakesoft.com ">, 2000"


.\" Copyright (c) 1996 Andries Brouwer (aeb@cwi.nl)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\"
.\" Traduction 23/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Màj 17/05/1998 LDP-1.19
.\" Màj 30/08/1999
.\" Màj 21/07/2003 LDP-1.56
.\" Màj 20/07/2005 LDP-1.64
.\" Màj 14/12/2005 LDP-1.65
.\" Màj 19/12/2005 LDP-1.66
.\"
.TH ERRNO 3 "21 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
errno \- Code de la dernière erreur.
.SH SYNOPSIS
.B #include <errno.h>
.sp
.BI "extern int " errno ;
.SH DESCRIPTION
La variable entière
.B errno
est renseignée par les appels systèmes (et quelques fonctions de bibliothèque)
pour expliquer les conditions d'erreurs. Sa valeur n'est significative que
lorsque l'appel système a échoué (généralement en renvoyant \-1), car même en
cas de réussite une fonction de bibliothèque peut modifier
.BR errno .

Parfois, si \-1 est une valeur de retour légale, il faut positionner
.B errno
à 0 avant d'effectuer l'appel système, de manière à détecter une erreur
éventuelle. C'est le cas par exemple de \fBgetpriority\fP(2).

.B errno
est définie par le standard ISO C comme une \fIlvalue modifiable\fP,
de type \fBint\fP, et n'a pas besoin d'être définie explicitement.
.B errno
peut être une macro.
.B errno
est locale à un thread\ ; lui affecter une valeur dans
un thread ne modifie pas sa valeur dans les autres threads.

Les codes d'erreurs valides sont tous non-nuls.
.B errno
n'est jamais mis à zéro par une fonction de la bibliothèque.
Toutes les erreurs détaillées dans POSIX.1 doivent avoir des
valeurs différentes.


POSIX.1 (édition 2001) définit les noms symboliques ci-dessous
pour les codes d'erreurs. Parmi eux, \fBEDOM\fP et \fBERANGE\fP
sont également dans le standard C ISO. L'amendement 1 au standard
C ISO définit également le code d'erreur \fBEILSEQ\fP pour les
erreurs de codage dans les caractères étendus, ou multi-octets.

.TP
.B E2BIG
Liste d'arguments trop longue.
.TP
.B EACCES
Interdiction d'accès.
.TP
.B EADDRINUSE
Adresse déjà en cours d'utilisation.
.TP
.B EADDRNOTAVAIL
Adresse non disponible.
.TP
.B EAFNOSUPPORT
Famille d'adresses non supportée.
.TP
.B EAGAIN
Ressource temporairement indisponible.
.TP
.B EALREADY
Connexion déjà en cours.
.TP
.B EBADF
Mauvais descripteur de fichier.
.TP
.B EBADMSG
Mauvais message.
.TP
.B EBUSY
Ressource occupée.
.TP
.B ECANCELED
Opération annulée.
.TP
.B ECHILD
Pas de processus fils.
.TP
.B ECONNABORTED
Connexion abandonnée.
.TP
.B ECONNREFUSED
Connexion refusée.
.TP
.B ECONNRESET
Connexion réinitialisée.
.TP
.B EDEADLK
Blocage d'une ressource évité.
.TP
.B EDESTADDRREQ
Adresse de destination nécessaire.
.TP
.B EDOM
Erreur de domaine.
.TP
.B EDQUOT
Réservé
.TP
.B EEXIST
Fichier existant.
.TP
.B EFAULT
Mauvaise adresse.
.TP
.B EFBIG
Fichier trop grand.
.TP
.B EHOSTUNREACH
Hôte non accessible.
.TP
.B EIDRM
Identificateur de ressource supprimé.
.TP
.B EILSEQ
Séquence d'octets illégale.
.TP
.B EINPROGRESS
Opération en cours.
.TP
.B EINTR
Appel système interrompu.
.TP
.B EINVAL
Argument invalide.
.TP
.B EIO
Erreur d'entrée-sortie.
.TP
.B EISCONN
La socket est connectée.
.TP
.B EISDIR
Est un répertoire.
.TP
.B ELOOP
Trop de liens symboliques rencontrés.
.TP
.B EMFILE
Trop de fichiers ouverts.
.TP
.B EMLINK
Trop de liens symboliques.
.TP
.B EMSGSIZE
Longueur du tampon de message inappropriée.
.TP
.B EMULTIHOP
Réservé.
.TP
.B ENAMETOOLONG
Nom de fichier trop long.
.TP
.B ENETDOWN
Le réseau est désactivé.
.TP
.B ENETRESET
Connexion annulée par le réseau.
.TP
.B ENETUNREACH
Réseau inaccessible.
.TP
.B ENFILE
Trop de fichiers ouverts sur le système.
.TP
.B ENOBUFS
Plus de tampons disponibles.
.\" ENODATA is part of XSR option
.TP
.B ENODATA
Pas de message disponible dans la file STREAM.
.TP
.B ENODEV
Périphérique inexistant.
.TP
.B ENOENT
Fichier ou répertoire inexistant.
.TP
.B ENOEXEC
Exécution impossible.
.TP
.B ENOLCK
Pas de verrou disponible.
.TP
.B ENOLINK
Réservé.
.TP
.B ENOMEM
Pas assez de mémoire.
.TP
.B ENOMSG
Pas de message du type attendu.
.TP
.B ENOTPROTOOPT
Protocole indisponible.
.TP
.B ENOSPC
Plus de place sur le périphérique.
.\" ENOSR is part of XSR option
.TP
.B ENOSR
Pas de ressource STREAM.
.\" ENOSTR is part of XSR option
.TP
.B ENOSTR
Pas un STREAM.
.TP
.B ENOSYS
Fonction non implémentée.
.TP
.B ENOTCONN
La socket n'est pas connectée.
.TP
.B ENOTDIR
Pas un répertoire.
.TP
.B ENOTEMPTY
Répertoire non vide.
.TP
.B ENOTSOCK
Pas une socket.
.TP
.B ENOTSUP
Opération non supportée.
.TP
.B ENOTTY
Opération de contrôle d'entrée-sortie invalide.
.TP
.B ENXIO
Périphérique ou adresse inexistant.
.TP
.B EOPNOTSUPP
Opération non supportée par la socket.
.TP
.B EOVERFLOW
Valeur trop grande pour le type de donnée.
.TP
.B EPERM
Opération interdite.
.TP
.B EPIPE
Tube sans lecteur.
.TP
.B EPROTO
Erreur de protocole.
.TP
.B EPROTONOSUPPORT
Protocole non supporté.
.TP
.B EPROTOTYPE
Mauvais type de protocole pour la socket.
.TP
.B ERANGE
Résultat trop grand.
.TP
.B EROFS
Système de fichiers en lecture-seule.
.TP
.B ESPIPE
Recherche invalide.
.TP
.B ESRCH
Processus inexistant.
.TP
.B ESTALE
Réservé.
.\" ETIME is part of XSR option
.TP
.B ETIME
Dépassement du délai ioctl() STREAM.
.TP
.B ETIMEDOUT
Délai maximal écoulé.
.TP
.B ETXTBSY
Fichier exécutable occupé.
.TP
.B EWOULDBLOCK
L'opération serait bloquante (même valeur que
.BR EAGAIN )
.TP
.B EXDEV
Lien inapproprié.
.SH NOTE
Une erreur fréquente est de faire
.RS
.nf

if (unappel() == -1) {
    printf("unappel() a échoué\en");
    if (errno == ...) { ... }
}

.fi
.RE
où
.I errno
n'a plus la valeur qu'elle avait juste après le retour de
.IR unappel() .
Si la valeur de
.I errno
doit être préservée à travers un appel bibliothèque,
elle doit être sauvegardée\ :
.RS
.nf

if (unappel() == -1) {
    int errsv = errno;
    printf("unappel() a échoué\en");
    if (errsv == ...) { ... }
}

.fi
.RE

.SH "VOIR AUSSI"
.BR perror (3)
.BR strerror (3)
.SH TRADUCTION
Christophe Blaess, 1996-2003.

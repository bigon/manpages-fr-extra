.\" Michael Haardt (michael@cantor.informatik.rwth.aachen.de) Sat Sep  3 22:00:30 MET DST 1994
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" Sun Feb 19 21:32:25 1995, faith@cs.unc.edu edited details away
.\"
.\" TO DO: This manual page should go more into detail how DES is perturbed, 
.\" which string will be encrypted, and what determines the repetition factor.
.\" Is a simple repetition using ECB used, or something more advanced?  I hope
.\" the presented explanations are at least better than nothing, but by no
.\" means enough.
.\" "
.\"
.\" Traduction 23/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Mise a jour 19/07/1997
.\" Mise à jour 06/06/2001 - LDP-man-pages-1.36
.\" Mise à jour 21/01/2002 - LDP-man-pages-1.47
.\" MàJ 21/07/2003 LDP-1.56
.TH CRYPT 3 "21 juillet 2003" LDP "Manuel du programmeur Linux"
.SH NOM
crypt \- Crytage de données ou de mot de passe.
.SH SYNOPSIS
.B #define _XOPEN_SOURCE_
.br
.B #include <unistd.h>
.sp
.BI "char *crypt (const char *" clé ", const char *" salt );
.SH DESCRIPTION
La fonction
.B crypt
est celle utilisée pour le cryptage des mots-de-passe. Elle est basée sur
l'algorithme DES (Data Encryption Standard) avec des variantes prévues entre
autres choses pour éviter l'implémentation matérielle d'un casseur de code.
.PP
L'argument
.I clé
est le mot-de-passe saisi par l'utilisateur.
.PP
.I salt
est une chaîne de deux caractères pris dans l'ensemble
[\fBa\fP\(en\fBzA\fP\(en\fBZ0\fP\(en\fB9./\fP]. Cette chaîne est utilisée
pour introduire une perturbation (parmi 4096) dans l'algorithme.
.PP
En utilisant les sept bits de poids faibles des huit premiers caractères de la
.IR clé ,
une clé de 56-bits est obtenue, qui est alors utilisée pour crypter de
manière répétée une chaîne de caractères constante (souvent une chaîne de
zéros).  La valeur renvoyée pointe sur le mot de passe crypté, une chaîne de 13
caractères ASCII imprimables, les deux premiers caractères représentant
l'argument \fIsalt\fP lui-même.
Cette valeur renvoyée pointe sur des données statiques dont le contenu
est écrasé à chaque appel.
.PP
Attention : L'espace des clés consistent en
.if t 2\s-2\u56\s0\d
.if n 2**56
soient 7,2e16 valeurs possibles. Une recherche exhaustive est possible en
utilisant des ordinateurs
massivement parallèles. Certains logiciels sont disponibles, comme
.BR crack (1),
qui exploreront la portion de l'espace des clés contenant les mots de
passe habituellement utilisés par les humains.
Ainsi, le choix d'un mot de passe doit au minimum éviter les noms propres ou
communs. On recommande fortement l'utilisation d'un programme comme
.BR passwd (1)
pour vérifier la fiabilité des mots de passe dès la saisie.
.PP
L'algorithme DES lui-même a quelques inconvénients qui rendent
l'utilisation de 
.B crypt (3)
peu recommandable pour autre chose que le
cryptage de mots de passe.
Si vous comptez développer un projet cryptographique en utilisant
.BR crypt(3) ,
abandonnez cette idée : achetez un bon bouquin sur la
cryptographie, et utilisez une bibliothèque DES toute faite comme il en
existe tant.
.SH "VALEUR RENVOYÉE"
Un pointeur vers le mot de passe crypté.
En cas d'erreur, NULL est renvoyé.
.SH ERREURS
.TP
.B ENOSYS
La fonction
.B crypt
est absente, probablement en raison des restrictions d'exportation des
Etats-Unis.
.\" This level of detail is not necessary in this man page. . .
.\" .PP
.\" When encrypting a plain text P using DES with the key K results in the
.\" encrypted text C, then the complementary plain text P' being encrypted
.\" using the complementary key K' will result in the complementary encrypted
.\" text C'.
.\" .PP
.\" Weak keys are keys which stay invariant under the DES key transformation.
.\" The four known weak keys 0101010101010101, fefefefefefefefe, 1f1f1f1f0e0e0e0e
.\" and e0e0e0e0f1f1f1f1 must be avoided.
.\" .PP
.\" There are six known half weak key pairs, which keys lead to the same
.\" encrypted data.  Keys which are part of such key clusters should be
.\" avoided.
.\" Sorry, I could not find out what they are.
.\""
.\" .PP
.\" Heavily redundant data causes trouble with DES encryption, when used in the
.\" .I codebook
.\" mode that
.\" .BR crypt (3)
.\" implements.  The
.\" .BR crypt (3)
.\" interface should be used only for its intended purpose of password
.\" verification, and should not be used at part of a data encryption tool.
.\" .PP
.\" The first and last three output bits of the fourth S-box can be
.\" represented as function of their input bits.  Empiric studies have
.\" shown that S-boxes partially compute the same output for similar input.
.\" It is suspected that this may contain a back door which could allow the
.\" NSA to decrypt DES encrypted data.
.\" .PP
.\" Making encrypted data computed using crypt() publically available has
.\" to be considered insecure for the given reasons.
.SH "EXTENSION GNU"
La version de cette fonction dans la GlibC 2 a quelques fonctionnalités
supplémentaires\ :
Si
.I salt
est une chaîne commençant par les trois caractères "$1$" suivis d'au plus
huit caractères, et éventuellement terminée par "$", alors au lieu d'utiliser
la machine DES, la fonction crypt de la GlibC emploie un algorithme
basé sur MD5 et sort jusqu'à 34 octets, plus précisément "$1$<chaine>$",
où "<chaine>" correspond aux 8 caractères maximum suivant le "$1$" dans
.IR salt ,
suivis de 22 octets de l'ensemble
[\fBa\fP\(en\fBzA\fP\(en\fBZ0\fP\(en\fB9./\fP].
La clé entière est significative ici, et non pas ses huit premiers octets.
.LP
Pour les programmes utilisant cette fonction, il faut employer l'option -lcrypt
lors de l'édition des liens.
.SH "CONFORMITÉ"
SVID, X/OPEN, BSD 4.3, POSIX 1003.1-2001.
.SH "VOIR AUSSI"
.BR login (1),
.BR passwd (1),
.BR encrypt (3),
.BR getpass (3),
.BR passwd (5)
.SH TRADUCTION
Christophe Blaess, 1996-2003.

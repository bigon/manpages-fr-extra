.\" sd.4
.\" Copyright 1992 Rickard E. Faith (faith@cs.unc.edu)
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Traduction 18/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\"
.\" Mise à jour 06/06/2001 - LDP-man-pages-1.36
.\" MàJ LDP 1.53
.\" MàJ 25/07/2003 LDP-1.56
.TH SD 4 "25 juillet 2003" LDP "Manuel du programmeur Linux" 
.SH NOM
sd \- contrôleur de disques SCSI.
.SH SYNOPSIS
#include <linux/hdreg.h>
.SH CONFIGURATION
Les noms de ces périphériques blocs suivent la convention suivante :
.BI sd lp,
ou
.I l
est une lettre indiquant le lecteur physique, et
.I p
est un nombre caractérisant la partition sur ce disque physique. Souvent
le numéro de partition
.IR p ,
sera absent si le périphérique correspond à l'ensemble du disque.

Les disques SCSI ont un numéro majeur valant 8, et un numéro mineur de
la forme (16 *
.IR numéro_disque ") + " numéro_partition ,
où
.I numéro_disque
est le numéro du disque physique dans l'ordre de détection, et
.I numéro_partition
est le suivant\ :
.sp
partition 0  = disque entier
.br
partitions 1-4 = partitions primaires DOS.
.br
partitions 5-8 = partitions étendues (logiques) DOS.

Par exemple,
.B /dev/sda
aura un majeur 8, mineur 0, et se référera à l'ensemble du premier disque SCSI.
.B /dev/sdb3
aura un majeur 8 mineur 19, et indiquera la troisième partition primaire DOS
sur le second disque SCSI du système.

Actuellement, seuls les périphériques blocs sont disponibles, les interfaces
"raw" ne sont pas encore implémentées.
.SH DESCRIPTION
Les ioctls suivants sont disponibles :
.TP
HDIO_REQ
.RS
Renvoie les paramètres disques du BIOS dans la structure suivante :
.RS
.nf
.ft B
struct hd_geometry {
      unsigned char heads;
      unsigned char sectors;
      unsigned short cylinders;
      unsigned long start;
};
.ft R
.fi
.RE

Un pointeur sur cette structure est passé en paramètre de
.BR ioctl (2).

En retour on obtient les informations sur la géométrie du disque
.I "telle qu'elle est comprise par le DOS!"
Cette géométrie n'est
.I pas
la géométrie physique du disque.
Elle est utilisée lors de la construction de la table des partitions du
disque, néanmoins elle est quand même nécessaire pour
.BR fdisk (1),
.BR efdisk (1), 
et
.BR lilo (1).
Si les informations de géométrie ne sont pas valables, zéro sera renvoyé
pour tous les paramètres.
.RE
.TP
BLKGETSIZE
Renvoie la taille du périphérique en secteurs. Le paramètre
.BR ioctl (2)
doit être un pointeur sur un
.BR long .
.TP
BLKRRPART
Force la relecture de la table des partitions du disque SCSI. Aucun paramètre
n'est nécessaire.

Les ioctls
.BR scsi (4)
sont également supportés. Si le paramètre
.BR ioctl (2)
est nécessaire, et est NULL, alors
.BR ioctl ()
retournera -EINVAL.
.SH FICHIERS
/dev/sd[a-h]: Les disques entiers.
.br
/dev/sd[a-h][0-8]: Les partitions individuelles.
.SH "VOIR AUSSI"
.BR scsi (4)

.SH TRADUCTION
Christophe Blaess, 1996-2003.

.\" Copyright (c) 1996 Free Software Foundation, Inc.
.\" This program is distributed according to the Gnu General Public License.
.\" See the file COPYING in the kernel source directory
.\" $Id: rmmod.1,v 1.1 1997/09/10 22:18:33 rth Exp $
.\" MàJ 30/07/2003 modutils-2.4.22
.TH RMMOD 8 "30 juillet 2003" modutils "Manuel de l'administrateur Linux"
.SH NOM
rmmod \- Décharger un module.
.SH SYNOPSIS
.B rmmod
[ \-aehrsvV] module ...
.SH DESCRIPTION
.B rmmod
décharge de la mémoire les modules chargés dans le noyau en cours d'exécution.
.PP
.B rmmod
essaye d'enlever un ensemble de modules du noyau, à condition qu'ils ne
soient ni en cours d'utilisation, ni nécessaires à d'autres modules.
.PP
S'il y a plus d'un module sur la ligne de commande, ils sont
retirés dans l'ordre indiqué. Ceci permet le déchargement de modules
empilés.
.PP
Avec l'option '\fB-r\fR', une suppression récursive est tentée.
Ceci signifie que si un module au sommet de la pile est indiqué sur la
ligne de commande, tous les modules qu'il utilise seront supprimés si
possible, et ainsi de suite.
.SS OPTIONS
.TP
.BR \-a ", " \-\-all
Réaliser l'auto-nettoyage\ : marquer les module non utilisés comme "à
nettoyer" et supprimer ceux déjà marqués. Ces derniers n'ont pas été utilisés
depuis le dernier auto-nettoyage.
La suppression en deux passes éviter de décharger des modules temporairement
inutilisés.
.TP
.BR \-e ", " \-\-persist
Sauver les données persistantes pour les modules indiqués, sans en décharger
aucun. Si aucun module n'est indiqué, alors la sauvegarde a lieu pour tous
les modules qui ont des données persistantes. Les données sont sauvegardées
seulement si le noyau et modutils supportent les données persistantes et
si \fI/proc/ksyms\fR contient une entrée
.br
__insmod_\fImodulename\fP_P\fIpersistent_filename\fP
.TP
.BR \-h ", " \-\-help
Affiche une page d'aide et se termine.
.TP
.BR \-r ", " \-\-stacks
Supprime une pile de module.
.TP
.BR \-s
Affiche tout via \fBsyslog\fP(3) plutôt que sur le terminal.
.TP
.BR \-v ", " \-\-verbose
Mode volubile.
.TP
.BR \-V ", " \-\-version
Affiche le numéro de version de \fBmodutils\fP.
.SH "DONNÉES PERSISTANTES"
Si un module contient des données persistantes (voir
.BR insmod (8)
et
.BR modules.conf (5))
alors la suppression de ce module écrit toujours ces données dans le fichier
dans l'entrée __insmod _P symbol. On peut aussi sauvegarder les données
persistantes à tout moment par \fBrmmod\ -e\fR, sans décharger aucun
module.
.PP
Quand les données persistantes sont écrites dans le fichier, elles sont
précédées par une ligne de commentaire
.br
#% \fIversion_noyau horodatage\fR
.br
Les lignes de commentaires générées automatiquement commencent par '#%',
elles sont toutes supprimées du fichier existant, mais les autres
commentaires sont préservés. Les valeurs des données sont écrites, en
conservant l'ordre des commentaires et affectations. Les nouvelles valeurs
sont ajoutées à la fin du fichier. Si le fichier contient des valeurs
absentes du module, elles sont préservées mais précédées d'un commentaire
d'avertissement. Ceci permet à un utilisateur de changer de versions de
noyau sans perdre de données persistantes et sans message d'erreur.
.PP
.B Note\ :
Pour les commentaires, le premier caractère non-blanc de la ligne doit être
'#'. Toute ligne non-blanche ne commençant pas par '#' est une option de
module. Les espaces en début de ligne sont ignorés, mais tout le reste est
transmis tel quel en option à insmod.
.SH "VOIR AUSSI"
.BR insmod "(8), " lsmod "(8), " ksyms "(8), " modprobe "(8)."
.SH BOGUES
\fBrmmod\fR [\fB\-V\fR\ |\ \fB\-\-version\fR] devrait afficher la version
et se terminer immédiatement. Au lieu de cela, il affiche la version et se
cmporte comme si aucun option n'était fournie.
.SH HISTOIRE
Le support des modules a été conçu initialement par Illustre Anonyme.
.br
La version initiale pour Linux par Bas Laarhoven <bas@vimec.nl>
.br
Version 0.99.14 par Jon Tombs <jon@gtex02.us.es>
.br
Étendu par Bjorn Ekwall <bj0rn@blox.se>
.br
Mis à jour pour Linux 2.1.17 par Richard Henderson <rth@tamu.edu>
.br
Mis à jour Linux 2.2.2 par Bjorn Ekwall <bj0rn@blox.se>
.br
Mis à jour modutils 2.3.20 par Keith Owens <kaos@ocs.com.au>
.br
Données persistantes modutils 2.3.22 par Keith Owens <kaos@ocs.com.au>

.SH TRADUCTION
.RI "Thierry Vignaud <" tvignaud@mandrakesoft.com ">, 2000"
.br
Christophe Blaess, 2003.

.\" Traduction par Christophe Blaess (ccb@club-internet.fr)
.\" MàJ 30/07/2003 psmisc-21.2
.TH FUSER 1 "30 juillet 2003" "psmsic" "Manuel de l'utilisateur Linux"
.SH NOM
fuser \- Identifier les processus qui utilisent un fichier.
.SH SYNOPSIS
.B fuser
.RB [ \-a | \-s ]
.RB [\-4 | \-6]
.RB [ \-n\ \fIespace ]
.RB [ \-\fIsignal\fB ]
.RB [ \-kmuv ]
.I nom ...
.br
.B fuser
.RB \-l
.br
.B fuser 
.RB \-V
.ad b
.SH DESCRIPTION
.B fuser
affiche les PIDs des processus qui utilisent les fichiers ou les systèmes
de fichiers indiqués.
Par défaut, il affiche les PIDs suivis d'une lettre indiquant
le type d'accès.
.RS
.IP \fBc\fP
répertoire courant.
.IP \fBe\fP
programme en cours d'exécution.
.IP \fBf\fP
fichier ouvert. \fBf\fP est omis par défaut.
.IP \fBr\fP
répertoire racine
.IP \fBm\fP
fichier projeté en mémoire, ou bibliothèque partagée.
.RE
.LP
\fBfuser\fP renvoie un code de retour non nul si aucun des fichiers
mentionnés n'est utilisé, ou en cas d'erreur fatale. Si au moins
un accès est détecté pour l'un des fichiers mentionnés, \fBfuser\fP
renvoie zéro.
.PP
Pour rechercher les processus utilisant les sockets UDP ou TCP, l'espace de
nom correspondant doit être sélectionné avec l'option \fB-n\fP. Par défaut
\fBfuser\fP recherchera les socket IPv4 et IPv6. Pour modifier ceci, utilisez
les options \fB-4\fP ou \fB-6\fP. Les sockets peuvent être spécifiées par
leurs port local ou distant et l'adresse distante. Tous les champs sont
facultatifs, mais il faut une virgule après un champ absent\ :

.RB \fB[\fP\fIport_lcl\fP\fB][\fP,\fB[\fP\fIhôte_dst\fP\fB][\fP,\fB[\fIport_dst\fP\fB]]]

Pour les adresses IP et numéros de port, on peut utiliser des numéros ou
des noms symboliques.

.SH OPTIONS
.IP \fB\-a\fP
Montrer tous les fichiers mentionnés sur la ligne de commande. Par défaut seuls
les fichiers utilisés par un processus au moins seront affichés.
.IP \fB\-k\fP
Envoyer un signal aux processus utilisant les fichiers. Si le modificateur
\fB-\fP\fIsignal\fP, n'est pas mentionné, c'est le signal SIGKILL qui est
envoyé. Un processus \fBfuser\fP ne se tue jamais lui-même, mais il peut
tuer d'autres processus \fBfuser\fP.
L'UID effectif du processus exécutant \fBfuser\fP est remplacé par
son UID réel avant l'émission du signal.
.IP \fB\-l\fP
Afficher la liste des noms de signaux disponibles.
.IP \fB\-m\fP
\fIfichier\fP se trouve sur un système de fichiers monté, ou est un
périphérique bloc monté.
Tous les processus accédant aux fichiers sur ce système seront affichés.
Si le nom d'un répertoire est mentionné, il est automatiquement
remplacé par \fIfichier\fP/. pour inclure tous les systèmes de fichiers
pouvant être montés en dessous de lui.
.IP \fB\-n\ \fIespace\fP 
Sélectionner un espace de noms différent. Sont supportés\ : \fBfile\fP (les
noms de fichiers, par défaut), \fBudp\fP et \fBtcp\fP pour les ports locaux.
Pour les ports on peut indiquer un numéro ou un nom de service. S'il n'y a
pas d'ambiguïté, le raccourci \fInom\fP/\fIespace\fP est accepté.
.IP \fB\-s\fP
Agir en silence. Les options \fB\-a\fP, \fB\-u\fP et \fB\-v\fP sont alors
ignorées.
.IP \fB\-\fIsignal\fP
Envoyer le signal indiqué plutôt que SIGKILL. On peut mentionner soit le
nom du signal (ex : \fB\-HUP\fP), soit son numéro (ex : \fB\-1\fP).
.IP \fB\-u\fP
Ajouter à chaque PID le nom d'utilisateur de son propriétaire.
.IP \fB\-v\fP
Mode volubile. Les processus sont présentés à la manière de \fBps\fP.
Les champs PID, USER et COMMAND sont similaires à ceux de \fBps\fP.
ACCESS indique le type d'utilisation du fichier.
.IP \fB\-V\fP
Afficher le numéro de version.
.IP \fB\-4\fP
Ne chercher que des sopckets IPv4. Cette option ne peut pas être utilisée
avec \fB-6\fP et n'a d'effet que sur les espaces de nom tcp et udp.
.IP \fB\-6\fP
Ne chercher que des sopckets IPv6. Cette option ne peut pas être utilisée
avec \fB-4\fP et n'a d'effet que sur les espaces de nom tcp et udp.
.IP \fB\-\fP
Remettre toutes les options à leurs valeurs par défaut, et le signal à SIGKILL.
.SH FICHIERS
.nf
/proc	Emplacement du système de fichiers proc
.fi
.SH EXEMPLES
\fBfuser -km /home\fP tue tous les processus accédant de quelque manière que ce
soit au système de fichiers /home.
.LP
\fBif fuser -s /dev/ttyS1; then :; else \fIqqchose\fP; fi\fR appelle
\fIqqchose\fP si aucun autre processus n'utilise /dev/ttyS1.
.LP
\fBfuser telnet/tcp\fP affiche tous les processus du port (local) TELNET.
.SH RESTRICTIONS
Les processus accédant plusieurs fois au même fichier, ou au même système
de fichiers ne sont affichés qu'une fois.
.PP
Si le même objet est spécifié plusieurs fois sur la ligne de commande,
certaines occurrences peuvent être ignorées.
.PP
\fBfuser\fP ne dispose de toutes les informations que s'il est exécuté
avec les privilèges de root. Ainsi, des fichiers ouverts par des processus
appartenant à d'autres utilisateurs n'apparaîtront peut-être pas, et des
exécutables peuvent n'être vus qu'en tant que projection en mémoire.
.PP
L'installation de \fBfuser\fP en tant que SUID root évite les problèmes
d'informations incomplètes, mais peut être gênant pour des raisons de
sécurité et de discrétion.
.PP
Les espaces de nom \fBudp\fP et \fBtcp\fP, et les sockets du domaine UNIX
ne fonctionnent pas avec les noyaux antérieurs au 1.3.78.
.PP 
\fBudp\fP et \fBtcp\fP fonctionnent avec IPv6 et IPv4, mais les adresses
sont uniquement du type IPv4.
.PP
Les accès par le noyau ne sont affichés qu'avec l'option \fB-v\fP.
.PP
L'option \fB-k\fP ne fonctionne que sur les processus. Si l'utilisateur est
le noyau, \fBfuser\fP affichera un message mais ne fera rien de plus.

.SH AUTEUR
Werner Almesberger <werner.almesberger@lrc.di.epfl.ch>
.SH "VOIR AUSSI"
.BR kill (1),
.BR killall (1),
.BR lsof (8),
.BR ps (1),
.BR kill (2)
.SH TRADUCTION
Christophe Blaess, 1997-2003.

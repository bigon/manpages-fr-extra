.\" Copyright (C), 1995, Graeme W. Wilford. (Wilf.)
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\"
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\"
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Wed Jun 14 16:10:28 BST 1995 Wilf. (G.Wilford@ee.surrey.ac.uk)
.\" Tiny change in formatting - aeb, 950812
.\" Tiny change in formatting - aeb, 950812
.\" Modified 8 May 1998 by Joseph S. Myers (jsm28@cam.ac.uk)
.\"
.\" Traduction 06/11/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Màj 21/07/2003 LDP-1.56
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.\" show the synopsis section nicely
.\"
.de xx
.in \\n(INu+\\$1
.ti -\\$1
..
.TH REGEX 3 "8 mai 1995" LDP "Manuel du programmeur Linux"
.SH NOM
regcomp, regexec, regerror, regfree \- Fonctions regex POSIX.
.SH SYNOPSIS
.B #include <regex.h>
.sp
.xx \w'\fBint\ regcomp\ (\fR'u
.BI "int\ regcomp\ (regex_t *" preg ", const char *" regex ,
.BI "int " cflags );
.xx \w'\fBint\ regexec\ (\fR'u
.BI "int\ regexec\ (const regex_t *" preg ", const char *" string ,
.BI "size_t " nmatch ", regmatch_t " pmatch[] ,
.BI "int " eflags );
.xx \w'\fBsize_t\ regerror\ (\fR'u
.BI "size_t\ regerror\ (int " errcode ,
.BI "const regex_t *" preg ", char *" errbuf ,
.BI "size_t " errbuf_size );
.xx \w'\fBvoid\ regfree\ (\fR'
.BI "void\ regfree\ (regex_t *" preg );
.SH "COMPILATION REGEX POSIX"
.B regcomp
est utilisée pour compiler une expression régulière sous une forme
utilisable par la suite pour des recherches avec
.BR regexec .

On fournit à
.B regcomp
les arguments
.IR preg ,
un pointeur vers une zone de stockage du motif,
.IR regex ,
un pointeur vers une chaîne terminée par un caractère nul, et
.IR cflags ,
les attributs indiquant le type de compilation.

Toutes les recherches d'expressions régulières sont effectuées à travers
la zone de motif compilé, ainsi
.B regexec
doit toujours recevoir l'adresse d'un motif initialisé par
.BR regcomp .

.I cflags
peut être un
.B OU binaire
entre une ou plusieurs constantes symboliques suivantes\ :
.TP
.B REG_EXTENDED
Utiliser la syntaxe d'Expression Régulière Étendue
.B POSIX
pour interpréter
.IR regex .
Sinon, la syntaxe d'Expression Régulière de Base
.B POSIX
est utilisée.
.TP
.B REG_ICASE
Ne pas différencier les majuscules des minuscules. Les recherches
.B regexec
suivantes utilisant le tampon de motif n'effectueront pas la différentiation.
.TP
.B REG_NOSUB
Ne pas utiliser les correspondances de sous-chaînes.
Les paramètres
.I nmatch
et
.I pmatch
de
.B regexec
sont ignorés si le tampon de motif est compilé avec cet attribut.
.TP
.B REG_NEWLINE
L'opérateur "n'importe-quel-caractère" ne s'identifie pas avec le saut de ligne.

Une liste d'exceptions
.RB ( [^...] )
s'identifie avec le saut de ligne, même si elle ne le contient pas explicitement.

L'opérateur Début-de-ligne
.RB ( ^ )
s'identifie avec une chaîne vide suivant immédiatement un saut de ligne,
même si l'attribut
.IR eflags ,
de
.BR regexec ,
contient
.BR REG_NOTBOL .

L'opérateur Fin-de-ligne
.RB ( $ )
s'identifie avec une chaîne vide précédant immédiatement un saut de ligne,
même si l'attribut
.IR eflags
contient
.BR REG_NOTEOL .
.SH "CORRESPONDANCE REGEX POSIX"
.B regexec
est utilisée pour mettre en correspondance une chaîne terminée par un
caractère nul, avec le tampon de motif précompilé
.IR preg .
.I nmatch
et
.I pmatch
fournissent des informations concernant l'emplacement des correspondances.
.I eflags
peut être un
.B OU binaire
entre les constantes
.B REG_NOTBOL
ou
.B REG_NOTEOL
qui modifient le comportement de la mise en correspondance décrite ci-dessous.
.TP
.B REG_NOTBOL
L'opérateur Début-de-ligne échoue toujours (mais voyez l'attribut de compilation
.B REG_NEWLINE
ci-dessus)
Cet attribut peut être utilisé quand différentes portions d'une chaîne
sont transmises à
.B regexec
et que le début de la chaîne ne correspond pas à un début de ligne.
.TP
.B REG_NOTEOL
L'opérateur Fin-de-ligne échoue toujours (mais voyez l'attribut de compilation
.B REG_NEWLINE
ci-dessus)
.SS "BYTE OFFSETS"
À moins que l'attribut
.B REG_NOSUB
n'ait été utilisé lors de la compilation du motif, il est possible d'obtenir
des informations sur les correspondances de sous-chaînes.
.I pmatch
doit être dimensionnée pour contenir au moins
.I nmatch
éléments.
Ils sont remplis par
.BR regexec
avec les adresses des sous-chaînes mises en correspondance. Tous les éléments
inutilisés de structure, contiendront la valeur \-1.

La structure
.B regmatch_t
du type
.I pmatch
est définie dans
.IR regex.h
ainsi\ :
.nf

typedef struct
{
  regoff_t  rm_so;
  regoff_t  rm_eo ;
} regmatch_t;

.fi
Chaque élément
.I rm_so
différent de \-1 indique le point de départ de la sous-chaîne suivante la
plus longue qui soit mise en correspondance. Cette valeur est un décalage
(offset) dans la chaîne.
L'élément
.I rm_eo
indique le décalage de la fin de la sous-chaîne.
.SH "RETOUR D'ERREUR POSIX"
.B regerror
est utilisé pour transformer les codes d'erreur renvoyés par
.B regcomp
et par
.B regexec
en libellés.

.B regerror
reçoit le code
.IR errcode ,
le tampon de motif
.IR preg ,
un pointeur sur une chaîne de caractères
.IR errbuf ,
et la longueur maximale de cette chaîne
.IR errbuf_size .
Cette fonction renvoie la taille
.I errbuf
nécessaire pour contenir le libellé d'erreur terminé par un caractère nul.
Si
.I errbuf
et
.I errbuf_size
son non nuls,
.I errbuf
est rempli avec les
.I "errbuf_size \- 1"
premiers caractères du libellé d'erreur, suivis d'un caractère nul.
.SH "LIBÉRATION DU TAMPON DE MOTIF POSIX"
En fournissant à
.B regfree
un tampon de motif précompilé
.IR preg,
il libérera la mémoire allouée au tampon durant la compilation avec
.BR regcomp .
.SH "VALEUR RENVOYÉE"
.B regcomp
renvoie zéro si la compilation réussit, ou un code d'erreur en cas d'échec.

.B regexec
renvoie zéro si la correspondance réussit, et
.B REG_NOMATCH
si elle échoue.
.SH ERREURS
Les erreurs suivantes peuvent être déclenchées par
.BR regcomp "\ :"
.TP
.B REG_BADRPT
Utilisation invalide d'opérateurs de répetition, comme un caractère
.RB "«\ "* "\ »
en première place.
.TP
.B REG_BADBR
Utilisation illégale de l'opérateur de référence inverse.
.TP
.B REG_EBRACE
Crochet manquant.
.TP
.B REG_EBRACK
Accolade manquante.
.TP
.B REG_ERANGE
Utilisation illégale de l'opérateur d'intervalle. Par exemple, la fin de
l'intervalle est inférieure au début de l'intervalle.
.TP
.B REG_ECTYPE
Nom de classe de caractère inconnu.
.TP
.B REG_EPAREN
Parenthèse manquante.
.TP
.B REG_ESUBREG
Référence inverse illégale vers une sous-expression.
.TP
.B REG_EEND
Erreur non-spécifique.
.TP
.B REG_ESCAPE
Séquence d'échappement invalide.
.TP
.B REG_BADPAT
Utilisation illégale d'un opérateur du type groupe ou liste.
.TP
.B REG_ESIZE
La compilation aurait besoin d'un tampon de taille supérieure à 64 Ko.
.TP
.B REG_ESPACE
Pas assez de mémoire.
.SH "CONFORMITÉ"
POSIX
.SH "VOIR AUSSI"
.BR regex (7),
.B "Manuel Regex GNU"
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Christophe Blaess
<http://www.blaess.fr/christophe/> le 6\ novembre\ 1996
et révisée le 2\ mai\ 2006.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 3\ regex\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.

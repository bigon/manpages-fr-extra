.\" Copyright (c) 1990, 1993
.\"	The Regents of the University of California.  All rights reserved.
.\"
.\" Redistribution and use in source and binary forms, with or without
.\" modification, are permitted provided that the following conditions
.\" are met:
.\" 1. Redistributions of source code must retain the above copyright
.\"    notice, this list of conditions and the following disclaimer.
.\" 2. Redistributions in binary form must reproduce the above copyright
.\"    notice, this list of conditions and the following disclaimer in the
.\"    documentation and/or other materials provided with the distribution.
.\" 3. All advertising materials mentioning features or use of this software
.\"    must display the following acknowledgement:
.\"	This product includes software developed by the University of
.\"	California, Berkeley and its contributors.
.\" 4. Neither the name of the University nor the names of its contributors
.\"    may be used to endorse or promote products derived from this software
.\"    without specific prior written permission.
.\"
.\" THIS SOFTWARE IS PROVIDED BY THE REGENTS AND CONTRIBUTORS ``AS IS'' AND
.\" ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE
.\" IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE
.\" ARE DISCLAIMED.  IN NO EVENT SHALL THE REGENTS OR CONTRIBUTORS BE LIABLE
.\" FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL
.\" DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS
.\" OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION)
.\" HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT
.\" LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY
.\" OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF
.\" SUCH DAMAGE.
.\"
.\"	@(#)hash.3	8.6 (Berkeley) 8/18/94
.\"
.\" Traduction 11/05/1999 par Christophe Blaess (ccb@club-internet.fr)
.\" LDP-1.23
.\" Màj 21/07/2003 LDP-1.56
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.TH HASH 3 "18 août 1994" LDP "Manuel du programmeur Linux"
.SH NOM
hash \- Méthodes d'accès aux bases de données avec tables de hachage.
.SH SYNOPSIS
.nf
.ft B
#include <sys/types.h>
#include <db.h>
.ft R
.fi
.SH DESCRIPTION
La routine
.BR dbopen ()
est l'interface de bibliothèque pour les fichiers de base de données.
L'un des formats de fichier supportés est la table de hachage.
La description générale des méthodes d'accès à une base de données
est fournie dans la page de manuel
.BR dbopen (3).
La page présente ne décrit que les informations spécifiques aux tables
de hachage.
.PP
Les structures de hachage représentent un schéma de base de données
dynamique et extensible.
.PP
La structure de données spécifique aux tables de hachage que
l'on transmet à
.BR dbopen ()
est définie dans <db.h> ainsi\ :
.sp
typedef struct {
.RS
u_int bsize;
.br
u_int ffactor;
.br
u_int nelem;
.br
u_int cachesize;
.br
u_int32_t (*hash)(const void *, size_t);
.br
int lorder;
.RE
} HASHINFO;
.PP
Les éléments de cette structure sont les suivants\ :
.TP
bsize
.I Bsize
(bucket size) défini la taille des cases de la table, et vaut,
par défaut, 256\ octets. Il est préférable d'augmenter la taille de
page pour les table situées sur disque ayant des éléments avec
beaucoup de données.
.TP
ffactor
.I Ffactor
indique une densité désirée au sein de la table. Il s'agit d'une
approximation du nombre de clés pouvant s'accumuler dans une seule
case, ce qui détermine le moment où la table doit s'agrandir ou se
rétrécir. La valeur par défaut est 8.
.TP
nelem
.I Nelem
est une estimation de la taille finale de la table de hachage. S'il n'est
pas configuré, ou s'il est configuré trop bas, la table s'agrandira
quand même correctement au fur et à mesure de l'entrée des clés,
bien qu'une légère dégradation des performances puisse être observée.
La valeur par défaut est 1.
.TP
cachesize
Une taille maximale suggérée de mémoire cache, en octets. Ceci n'a
qu'une valeur
.BR indicative ,
et les méthodes d'accès alloueront plus de mémoire plutôt que d'échouer.
.TP
hash
.I Hash
est une fonction définie par l'utilisateur.
Comme aucune fonction de hachage ne se comporte parfaitement bien sur tout
type de données, il peut arriver que la fonction interne soit particulièrement
mauvaise sur un jeu particulier de données. La fonction de hachage fournie
par l'utilisateur doit prendre deux arguments (un pointeur sur une chaîne
d'octets et une longueur) et renvoyer une valeur sur 32 bits utilisable
comme valeur de hachage.
.TP
lorder
L'ordre des octets pour les entiers stockés dans la base de données.
Ce nombre doit représenter l'ordre sous forme d'entier. Par exemple l'ordre
poids faible-poids fort (big endian) est représenté par le nombre 4321.
Si
.I lorder
vaut 0 (pas d'ordre indiqué), on utilise l'ordre des octets du système hôte.
.PP
Si le fichier existe déjà, on utilise l'ordre des octets indiqués lors
de sa création.
.PP
SI une fonction de hachage est indiquée,
.I hash_open
essayera de déterminer s'il s'agit de la même fonction que celle indiquée
lors de la création de la base de donnée, et échouera si ce n'est pas le
cas.
.PP
Des interfaces pour les routines décrites dans
.BR dbm (3),
et
.BR ndbm (3)
sont fournies, toutefois ces interfaces ne sont pas compatibles avec
les anciens formats de fichiers.
.SH ERREURS
Les routines des méthodes d'accès au
.I "tables de hachage"
peuvent échouer et remplir
.I errno
avec n'importe quelle erreur indiquée par la routine
.BR dbopen (3).
.SH BOGUES
Seuls les ordres d'octets gros boutiste (big-endian) et petit boutiste (little-endian) fonctionnent.
.SH "VOIR AUSSI"
.BR btree (3),
.BR dbopen (3),
.BR mpool (3),
.BR recno (3)
.sp
.BR "Dynamic Hash Tables" ,
Per-Ake Larson, Communications of the ACM, April 1988.
.sp
.BR "A New Hash Package for UNIX" ,
Margo Seltzer, USENIX Proceedings, Winter 1991.
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Christophe Blaess
<http://www.blaess.fr/christophe/> le 11\ mai\ 1999
et révisée le 2\ mai\ 2006.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 3\ hash\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.

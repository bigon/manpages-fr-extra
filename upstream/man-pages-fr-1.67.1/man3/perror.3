.\" Copyright (c) 1994 Michael Haardt (michael@moria.de), 1994-06-04
.\" Copyright (c) 1995 Michael Haardt
.\"      (michael@cantor.informatik.rwth-aachen.de), 1995-03-16
.\" Copyright (c) 1996 Andries Brouwer (aeb@cwi.nl), 1996-01-13
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" 1996-01-13 aeb: merged in some text contributed by Melvin Smith
.\"   (msmith@falcon.mercer.peachnet.edu) and various other changes.
.\" Modified 1996-05-16 by Martin Schulze (joey@infodrom.north.de)
.\"
.\" Traduction 05/11/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Màj 16/07/1999 - Fautes de frappe
.\" Màj 26/01/2002 LDP-1.47
.\" Màj 21/07/2003 LDP-1.56
.\" Màj 20/07/2005 LDP-1.64
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.TH PERROR 3 "14 décembre 2001" LDP "Manuel du programmeur Linux"
.SH NOM
perror \- Affiche un message d'erreur système.
.SH SYNOPSIS
.B #include <stdio.h>
.sp
.BI "void perror (const char " *s );
.sp
.B #include <errno.h>
.sp
.BI "const char *" sys_errlist [];
.br
.BI "int " sys_nerr ;
.br
.BI "int " errno ;
.SH DESCRIPTION
La fonction
.BR perror ()
affiche un message sur la sortie d'erreur standard, décrivant la dernière
erreur rencontrée durant un appel système ou une fonction de bibliothèque.
D'abord, (si
.I s
n'est pas NULL et
.RI * s
non plus), la chaîne de caractère
.I s
est imprimée, suivie d'un double-point ou d'un blanc,
puis le message, suivi d'un saut de ligne.

La chaîne de caractères contient généralement le nom de la fonction
où s'est produit l'erreur. Le numéro d'erreur est obtenu à partir de
la variable externe \fIerrno\fP, qui contient le code d'erreur lorsqu'un
problème survient, mais qui N'est PAS effacé lorsqu'un appel est réussi.

La liste globale d'erreurs
.IR sys_errlist "[]"
indexée par
.I errno
peut être utilisée pour obtenir le message d'erreur sans le saut de ligne.
Le plus grand numéro de message contenu dans cette table est
.IR sys_nerr " \- 1."
Soyez prudents lors des accès directs dans cette liste, car de nouvelles
erreurs n'ont peut être pas de message dans
.IR sys_errlist "[]."

Quand un appel système échoue, il renvoie habituellement \-1, et place le
code d'erreur dans
.IR errno .
(Les codes sont décrits dans
.IR "<errno.h>" .)
Beaucoup de fonctions de bibliothèque se comportent également ainsi.
La fonction
.BR perror ()
permet de traduire les codes d'erreur en une forme humainement lisible.
Notez que
.I errno
est indéfinie après un appel de fonction de bibliothèque réussi. Cette fonction
peut modifier \fIerrno\fP même si elle réussit, ne serait-ce que par des
appels systèmes internes qui peuvent échouer.

Ainsi, si un appel qui échoue n'est pas immédiatement suivi par
.BR perror ,
la valeur de
.I errno
doit être sauvegardée.

.SH "CONFORMITÉ"
La fonction
.BR perror ()
et la variable externe
.I errno
(voir
.BR errno (3))
sont conformes à ANSI C, BSD 4.3, POSIX, X/OPEN.
Les variables externes
.I sys_nerr
et
.I sys_errlist
sont conformes à BSD.
.SH NOTE
Les variables externes
.I sys_nerr
et
.I sys_errlist
sont définies par la glibc, mais dans
.IR <stdio.h> .
.\" and only when _BSD_SOURCE is defined.
.\" When _GNU_SOURCE is defined, the symbols
.\" .I _sys_nerr
.\" and
.\" .I _sys_errlist
.\" are provided.
.SH "VOIR AUSSI"
.BR errno (3),
.BR strerror (3)
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Christophe Blaess
<http://www.blaess.fr/christophe/> le 5\ novembre\ 1996
et révisée le 2\ mai\ 2006.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 3\ perror\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.

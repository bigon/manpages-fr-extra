.\" Copyright 2003 Walter Harms (walter.harms@informatik.uni-oldenburg.de)
.\" Distributed under GPL
.\"
.\" Polished a bit, added a little, aeb
.\"
.\" Traduction : Alain Portal
.\" 04/07/2005 LDP-1.61
.\" Màj 14/12/2005 LDP-1.65
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.TH SETALIASENT 3 "9 septembre 2003" LDP "Manuel du programmeur Linux"
.SH "NOM"
setaliasent, endaliasent, getaliasent, getaliasent_r, getaliasbyname, getaliasbyname_r \- Lire une entrée alias
.SH SYNOPSIS
.B #include <aliases.h>
.sp
.BI "void setaliasent(void);"
.sp
.BI "void endaliasent(void);"
.sp
.BI "struct aliasent *getaliasent(void);"
.sp
.BI "int getaliasent_r(struct aliasent *" result ","
.br
.BI "    char *" buffer ", size_t " buflen ", struct aliasent **" res );
.sp
.BI "struct aliasent *getaliasbyname(const char *" name );
.sp
.BI "int getaliasbyname_r(const char *" name ,
.br
.BI "    struct aliasent *" result ,
.br
.BI "    char *" buffer ", size_t " buflen ", struct aliasent **" res );
.sp
.SH DESCRIPTION
Une des bases de données disponibles avec le «\ Name Service Switch\ » (NSS)
est la base de données des aliases qui contient les aliases de mail.
(Pour savoir quelles bases de données sont supportées, taper la commande
«\ getent \-\-help\ ».)
Six fonctions sont fournies pour accéder à la base de données des aliases.
.PP
La fonction
.BR getaliasent ()
renvoie un pointeur sur une structure contenant l'information de groupe.
Le premier appel de cette fonction permet de retourner la première entrée\ ;
les appels suivants retourneront les entrées successives.
.PP
La fonction
.BR setaliasent ()
positionne le pointeur de fichier au début de la base de données des aliases.
.PP
La fonction
.BR endaliasent ()
ferme la base de données des aliases.
.PP
.BR getaliasent_r ()
est la version réentrante de la fonction
.BR getaliasent ().
La structure recherchée est enregistrée via le premier argument mais le
programmeur doit également renseigner les autres arguments. Ne pas fournir
suffisamment d'espace provoquera l'échec de la fonction.
.PP
La fonction
.BR getaliasbyname ()
prend en argument «\ name\ » et cherche dans la base de données des aliases.
L'entrée est retournée sous forme de pointeur vers une structure aliasent.
.PP
La fonction
.BR getaliasbyname_r ()
est la version réentrante de la fonction précédente.
La structure recherchée est enregistrée via le deuxième argument mais le
programmeur doit également renseigner les autres arguments. Ne pas fournir
suffisamment d'espace provoquera l'échec de la fonction.
.PP
La structure aliasent est définie dans <aliases.h>.
.nf
struct aliasent {
    char *alias_name;              /* alias name */
    size_t alias_members_len;
    char **alias_members;          /* alias name list */
    int alias_local;
};
.fi
.SH "FICHIERS"
La base de données des aliases par défaut est le fichier
.IR /etc/aliases .
Elle peut être modifiée dans le fichier
.IR /etc/nsswitch.conf .
.SH "VALEUR RENVOYÉE"
Les fonctions
.BR getaliasent_r ()
et
.BR getaliasbyname_r ()
renvoient une valeur non-nulle en cas d'erreur.
.SH "EXEMPLE"
L'exemple suivant se compile avec la commande «\ gcc example.c -o example\ ».
Il affichera tous les noms trouvés dans la base de données des aliases.
.sp
.nf
#include <aliases.h>
#include <stdio.h>
#include <stdlib.h>
#include <errno.h>

int main() {
  struct aliasent *al;
  setaliasent();
  for (;;) {
    al = getaliasent();
    if (al == NULL) break;
    printf("Name: %s\\n", al->alias_name);
  }
  if (errno) {
      perror("reading alias");
      exit(EXIT_FAILURE);
  }
  endaliasent();
  exit(EXIT_SUCCESS);
}
.fi
.SH "CONFORMITÉ"
Ces routines sont spécifiques à la glibc.
Le système NeXT a des routines similaires.
.RS
.nf
#include <aliasdb.h>
void alias_setent(void);
void alias_endent(void);
alias_ent *alias_getent(void);
alias_ent *alias_getbyname(char *name);
.fi
.RE
.SH "VOIR AUSSI"
.BR getgrent (3),
.BR getpwent (3),
.BR getspent (3),
.BR aliases (5)
.\"
.\" /etc/sendmail/aliases
.\" Yellow Pages
.\" newaliases, postalias
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Alain Portal
<aportal AT univ-montp2 DOT fr> le 4 juillet 2005
et révisée le 2\ mai\ 20065.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 3\ setaliasent\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.

.\" Copyright (c) 2000 Andries Brouwer (aeb@cwi.nl)
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 59 Temple Place, Suite 330, Boston, MA 02111,
.\" USA.
.\"
.\" Traduction 03/11/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Màj 21/07/1997
.\" Màj 06/06/2001 LDP-1.36
.\" Màj 21/07/2003 LDP-1.56
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.TH GETPASS 3 "5 décembre 2000" LDP "Manuel du programmeur Linux"
.SH NOM
getpass \- Saisie d'un mot de passe (password).
.SH SYNOPSIS
.B #include <unistd.h>
.sp
.B "char *getpass (const char *" prompt );
.SH DESCRIPTION
Cette fonction est obsolète, ne l'utilisez pas\ !
.PP
La fonction
.BR getpass ()
ouvre
.I /dev/tty
(le terminal de contrôle du processus)
affiche le message d'accueil
.IR prompt ,
éteint l'écho local, lit une ligne (le mot de passe), puis restore l'état de
.I /dev/tty
et le referme.
.SH "VALEUR RENVOYÉE"
La fonction
.BR getpass ()
renvoie un pointeur sur une chaîne de caractères allouée statiquement
contenant (les PASS_MAX premiers caractères du) mot de passe sans le retour
chariot final, terminé par un caractère nul.
Ce tampon peut être écrasé par un autre appel.
En cas d'erreur, l'état du terminal est restauré,
.I errno
est rempli, et la fonction renvoie NULL.
.SH ERREURS
La fonction peut échouer dans les cas suivants\ :
.TP
.B ENXIO
Le processus n'a pas de terminal de contrôle.
.SH NOTES
Dans les versions libc4 et libc5, le message n'est pas affiché sur
.I /dev/tty
mais sur
.IR stderr .
De plus, si
.I /dev/tty
ne peut être ouvert, le mot de passe est lu depuis
.IR stdin .
Le tampon statique a une longueur de 128 octets, aussi seulement 127
carctères du mot de passe sont renvoyés. Durant la lecture, les signaux
(SIGINT, SIGQUIT, SIGSTOP) sont désactivés et les caractères de contrôle
correspondant (en général Ctrl-C, Ctrl-\e, Ctrl-Z et Ctrl-Y) sont transmis
comme part intégrante du mot de passe.
Depuis la libc5.4.19, l'édition de ligne est également désactivée, ainsi
les retours en arrières etc. seront présents dans le mot de passe.
.PP
Pour la glibc2, si
.I /dev/tty
ne peut pas être ouvert, le message est envoyé sur
.I stderr
et le mot de passe lu sur
.IR stdin .
Il n'y a pas de limite à la longueur du mot de passe. L'édition de ligne
n'est pas désactivée.
.PP
D'après SUSv2, la valeur de PASS_MAX doit être définie dans
.I <limits.h>
au cas où elle est inférieure à 8, et doit être toujours accessible avec
.IR sysconf(_SC_PASS_MAX) .
Quoiqu'il en soit, POSIX.2 retire les constantes PASS_MAX et _SC_PASS_MAX,
ainsi que la fonction
.BR getpass ().
libc4 et libc5 n'ont jamais utilisé PASS_MAX ou _SC_PASS_MAX. glibc2
accepte _SC_PASS_MAX et renvoie BUFSIZ (par exemple 8192).
.SH FICHIERS
.I /dev/tty
.SH "VOIR AUSSI"
.BR crypt (3)
.SH HISTORIQUE
Une fonction
.BR getpass ()
est apparue dans la Version 7 d'AT&T UNIX.
.SH BOGUES
Le processus appelant doit effacer le mot de passe saisi aussi vite que
possible, afin d'éviter d'en conserver une copie en texte clair dans
son espace d'adressage.
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Christophe Blaess
<http://www.blaess.fr/christophe/> le 3\ novembre\ 1996
et révisée le 2\ mai\ 2006.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 3\ getpass\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.

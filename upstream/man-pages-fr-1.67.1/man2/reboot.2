.\" Copyright (c) 1998 Andries Brouwer (aeb@cwi.nl), 24 September 1998
.\"
.\" Permission is granted to make and distribute verbatim copies of this
.\" manual provided the copyright notice and this permission notice are
.\" preserved on all copies.
.\"
.\" Permission is granted to copy and distribute modified versions of this
.\" manual under the conditions for verbatim copying, provided that the
.\" entire resulting derived work is distributed under the terms of a
.\" permission notice identical to this one
.\" 
.\" Since the Linux kernel and libraries are constantly changing, this
.\" manual page may be incorrect or out-of-date.  The author(s) assume no
.\" responsibility for errors or omissions, or for damages resulting from
.\" the use of the information contained herein.  The author(s) may not
.\" have taken the same level of care in the production of this manual,
.\" which is licensed free of charge, as they might when working
.\" professionally.
.\" 
.\" Formatted or processed versions of this manual, if unaccompanied by
.\" the source, must acknowledge the copyright and authors of this work.
.\"
.\" Traduction 13/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Màj 08/04/1997
.\" Màj 09/04/1999 LDP-1.22
.\" Màj 18/07/2003 LDP-1.56
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.TH REBOOT 2 "24 septembre 1998" LDP "Manuel du programmeur Linux"
.SH NOM
reboot \- Redémarrer la machine, ou activer/désactiver Ctrl-Alt-Suppr.
.SH SYNOPSIS
Avec libc4 et libc5, la fonction de bibliothèque et l'appel système sont
identiques, et depuis la version 2.1.30 du noyau, il existe des
noms symboliques LINUX_REBOOT_* pour les constantes et un quatrième
argument à l'appel\ :
.sp
.B #include <unistd.h>
.br
.B #include <linux/reboot.h>
.sp
.BI "int reboot (int " magic ", int " magic2 ", int " flag ", void *" arg );
.sp
Avec glibc, certaines des constantes concernées ont des noms symboliques
RB_*, et la fonction de bibliothèque est une coquille à 1 argument
encapsulant l'appel système à 3 arguments\ :
.sp
.B #include <unistd.h>
.br
.B #include <sys/reboot.h>
.sp
.BI "int reboot (int " flag );
.SH DESCRIPTION
L'appel-système
.B reboot
fait redémarrer le système, ou active/désactive la séquence de
touches de redémarrage (Ctrl-Alt-Suppr par défaut mais cela peut
être modifié en utilisant
.BR loadkeys (1)).
Ces touches sont abrégées en CAD pour Ctrl-Alt-Del.
.PP
Cet appel-système échouera (avec EINVAL) sauf si
.I magic
vaut LINUX_REBOOT_MAGIC1 (c'est-à-dire 0xfee1dead) et si
.I magic2
vaut LINUX_REBOOT_MAGIC2 (qui est 672274793).
Toutefois, sont également autorisées pour
.I magic2
les valeurs LINUX_REBOOT_MAGIC2A
(qui vaut 85072278) depuis la version 2.1.17 du noyau et
LINUX_REBOOT_MAGIC2B (valant 369367448) depuis la version 2.1.97.
Les valeurs hexadécimales de ces constantes ont un sens.
L'argument
.I flag
peut prendre l'une des valeurs suivantes\ :
.TP
.B LINUX_REBOOT_CMD_RESTART
(RB_AUTOBOOT, 0x1234567).
Le message
«\ Restarting system.\ » est affiché et un redémarrage
est initialisé immédiatement.
Si cet appel n'est pas précédé par un
.BR sync (2),
des données seront perdues.
.TP
.B LINUX_REBOOT_CMD_HALT
(RB_HALT_SYSTEM, 0xcdef0123; depuis 1.1.76).
Le message
«\ System halted.\ » est affiché et le système est arrêté.
Le contrôle est transmis au moniteur en ROM s'il y en a un.
Si cet appel n'est pas précédé par un
.BR sync (2),
des données seront perdues.
.TP
.B LINUX_REBOOT_CMD_POWER_OFF
(0x4321fedc; depuis 2.1.30).
Le message
«\ Power down.\ » est affiché, et tout le système est mis
hors-tension si possible.
Si cet appel n'est pas précédé par un
.BR sync (2),
des données seront perdues.
.TP
.B LINUX_REBOOT_CMD_RESTART2
(0xa1b2c3d4; depuis 2.1.30).
Le message «\ Restarting system with command '%s'\ » est affiché
et un redémarrage (en utilisant la chaîne de commande fournie dans
.IR arg )
est enclenché immédiatement.
Si cet appel n'est pas précédé par un
.BR sync (2),
des données seront perdues.
.TP
.B LINUX_REBOOT_CMD_CAD_ON
(RB_ENABLE_CAD, 0x89abcdef).
Les touches de redémarrage Ctrl-Alt-Suppr sont autorisée.
Ceci signifie que la frappe de ces touches déclenchera l'action
associée à LINUX_REBOOT_CMD_RESTART immédiatement.
.TP
.B LINUX_REBOOT_CMD_CAD_OFF
(RB_DISABLE_CAD, 0).
Les touches de redémarrage Ctrl-Alt-Suppr sont désactivées.
Ceci signifie que la frappe de ces touches enverra un signal SIGINT
au processus 1 (init). Celui-ci pourra alors décider de l'action
appropriée à enclencher (généralement tuer tous les processus,
démonter la plupart des systèmes de fichiers, sync, et redémarrer).
.LP
Évidemment, seul le super-utilisateur peut utiliser cette fonction
.LP
L'effet exact des actions décrites ci-dessus dépend de l'architecture.
Pour les i386, l'argument supplémentaire ne sert à rien à ce jour (2.1.22),
mais le type de redémarrage peut être sélectionné par un argument
en ligne de commande du noyau («\ reboot=...\ ») afin d'être un
redémarrage à chaud, à froid, matériel ou par le bios.
.SH "VALEUR RENVOYÉE"
.BR reboot
renvoie 0 s'il réussit, ou \-1 s'il échoue, auquel cas
.I errno
contient le code d'erreur.
.SH ERREURS
.TP
.B EINVAL
Mauvais nombres \fImagiques\fP ou mauvaise valeur de \fIflag\fP.
.TP
.B EPERM
.BR reboot
a été invoqué par un utilisateur normal (pas le super-utilisateur).
.SH "CONFORMITÉ"
.B reboot
est spécifique à Linux et ne doit pas être employé dans des programmes
conçus pour être portables
.SH "VOIR  sync (2),
.BR bootparam (7),
.BR ctrlaltdel (8),
.BR halt (8),
.BR reboot (8)
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Christophe Blaess
<http://www.blaess.fr/christophe/> le 13\ octobre\ 1996
et révisée le 2\ mai\ 2006.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 2\ reboot\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.

.\"
.\"  epoll by Davide Libenzi ( efficient event notification retrieval )
.\"  Copyright (C) 2003  Davide Libenzi
.\"
.\"  This program is free software; you can redistribute it and/or modify
.\"  it under the terms of the GNU General Public License as published by
.\"  the Free Software Foundation; either version 2 of the License, or
.\"  (at your option) any later version.
.\"
.\"  This program is distributed in the hope that it will be useful,
.\"  but WITHOUT ANY WARRANTY; without even the implied warranty of
.\"  MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\"  GNU General Public License for more details.
.\"
.\"  You should have received a copy of the GNU General Public License
.\"  along with this program; if not, write to the Free Software
.\"
.\"  Davide Libenzi <davidel@xmailserver.org>
.\"
.\"  Traduction Christophe Blaess, <ccb@club-internet.fr>
.\" Màj 25/07/2003 LDP-1.56
.\" Màj 23/12/2005 LDP-1.67
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.TH EPOLL_CTL 2 "23 octobre 2002" LDP "Maniel du programmeur Linux"
.SH NOM
epoll_ctl \- Interface de contrôle pour un descripteur epoll.
.SH SYNOPSIS
.B #include <sys/epoll.h>
.sp
.BR "int epoll_ctl(int " epfd ", int " op ", int " fd ", struct epoll_event *" event )
.SH DESCRIPTION
Contrôle le descripteur
.B epoll
.IR epfd ,
en demandant que l'opération
.IR op
soit réalisée sur le descripteur cible
.IR fd .
La structure
.IR event
décrit l'objet lié au descripteur de fichier
.IR fd .
La structure
.B epoll_event
est définie ainsi\ :
.sp
.nf

	typedef union epoll_data {
		void *ptr;
		int fd;
		__uint32_t u32;
		__uint64_t u64;
	} epoll_data_t;

	struct epoll_event {
		__uint32_t events;	/* Evénement epoll      */
		epoll_data_t data;	/* Variable utilisateur */
	};

.fi

Le membre
.I events
est un masque de bits composés à partir des événéments disponibles
suivants\ :
.TP
.B EPOLLIN
Le descripteur associé est disponible pour un appel
.BR read (2).
.TP
.B EPOLLOUT
Le descripteur associé est disponible pour un appel
.BR write (2).
.TP
.B EPOLLPRI
Il y a des données urgentes disponibles pour un appel
.BR read (2).
.TP
.B EPOLLERR
Une erreur s'est produite sur le descripteur associé.
.TP
.B EPOLLHUP
Une déconnexion s'est produite sur le descripteur associé.
.TP
.B EPOLLET
Fixer le comportement en détection de changement d'état sur le
descripteur. Par défaut
.B epoll
fonctionne en détection de niveau. Voir
.BR epoll (4)
pour plus de détails sur les comportements en détection de niveau
et de changements d'état.
.TP
.B EPOLLONESHOT
Fixer le comportement coup unique (Ndt\ : one-shot) pour le descripteur
de fichier associé. Cela signifie qu'après qu'un événement n'ait été
retiré avec
.BR epoll_wait (2),
le descripteur de fichier est désactivé de manière interne et aucun autre
événement ne sera rapporté par l'interface
.BR epoll .
L'utilisateur doit appeler
.BR epoll_ctl (2)
avec
.B EPOLL_CTL_MOD
pour réactiver le descripteur de fichier avec le nouveau masque d'événement.
.PP
.sp
L'interface
.B epoll
supporte tous les descripteurs de fichiers supportés par
.BR poll (2).
Les valeurs valides pour le paramètre
.IR op
sont\ :
.RS
.TP
.B EPOLL_CTL_ADD
Ajouter le descripteur de fichier
.I fd
dans le
descripteur
.B epoll
.I epfd
et associe l'événement
.I event
avec le fichier représenté par
.IR fd .
.TP
.B EPOLL_CTL_MOD
Change l'événement
.I event
associé au descripteur de fichier
.IR fd .
.TP
.B EPOLL_CTL_DEL
Supprime le descripteur de fichier
.I fd
dans le
descripteur
.B epoll
.IR epfd .
.RE
.SH "VALEUR RENVOYÉE"
Lorsqu'il réussit, l'appel
.BR epoll_ctl (2)
renvoie zéro. Si une erreur se produit,
.BR epoll_ctl (2)
renvoie \-1 et
.I errno
contient le code approprié.
.SH ERREURS
.TP
.B EBADF
Le descripteur de fichiers
.I epfd
n'est pas un descripteur valide.
.TP
.B EPERM
Le fichier cible
.I fd
n'est pas supporté par
.BR epoll .
.TP
.B EINVAL
Le descripteur de fichier
.IR epfd ,
n'est pas un descripteur
.BR epoll ,
ou l'opération demandée
.I op
n'est pas supportée par cette interface.
.TP
.B ENOMEM
Pas assez de mémoire dans le noyau pour traiter
l'opération
.IR op .
.SH CONFORMITÉ
.BR epoll_ctl (2)
est une nouvelle API introduite dans Linux 2.5.44.
Son interface est stabilisée depuis le 2.5.66.
.SH "VOIR AUSSI"
.BR epoll_create (2),
.BR epoll_wait (2),
.BR epoll (4)
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Christophe Blaess
<http://www.blaess.fr/christophe/> le 25\ juillet\ 2003
et révisée le 2\ mai\ 2006.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 2\ epoll_ctl\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.


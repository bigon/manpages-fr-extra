.\" Hey Emacs! This file is -*- nroff -*- source.
.\"
.\" Copyright (C) Markus Kuhn, 1996
.\"
.\" This is free documentation; you can redistribute it and/or
.\" modify it under the terms of the GNU General Public License as
.\" published by the Free Software Foundation; either version 2 of
.\" the License, or (at your option) any later version.
.\"
.\" The GNU General Public License's references to "object code"
.\" and "executables" are to be interpreted as the output of any
.\" document formatting or typesetting system, including
.\" intermediate and printed output.
.\"
.\" This manual is distributed in the hope that it will be useful,
.\" but WITHOUT ANY WARRANTY; without even the implied warranty of
.\" MERCHANTABILITY or FITNESS FOR A PARTICULAR PURPOSE.  See the
.\" GNU General Public License for more details.
.\"
.\" You should have received a copy of the GNU General Public
.\" License along with this manual; if not, write to the Free
.\" Software Foundation, Inc., 675 Mass Ave, Cambridge, MA 02139,
.\" USA.
.\"
.\" 1996-04-10  Markus Kuhn <mskuhn@cip.informatik.uni-erlangen.de>
.\"             First version written
.\"
.\" Traduction 14/10/1996 par Christophe Blaess (ccb@club-internet.fr)
.\" Màj 08/04/1997
.\" Màj 18/07/2003
.\" Màj 01/05/2006 LDP-1.67.1
.\"
.TH NANOSLEEP 2 "10 avril 1996" LDP "Manuel du programmeur Linux"
.SH NOM
nanosleep \- Arrêter l'exécution pendant une durée donnée.
.SH SYNOPSIS
.B #include <time.h>
.sp
\fBint nanosleep(const struct timespec *\fIreq\fB, struct timespec *\fIrem\fB);
.fi
.SH DESCRIPTION
.B nanosleep
suspend l'exécution du programme en cours pour une durée valant
au moins
.IR *req .
Cette fonction peut se terminer plus tôt que prévu si un signal a
été reçu par le processus. Dans ce cas, elle renvoie \-1,
positionne \fIerrno\fR à la valeur
.BR EINTR ,
et inscrit le temps restant dans la structure pointée par
.IR rem
à moins que
.I rem
soit
.BR NULL .
La valeur de
.I *rem
peut être utilisée pour rappeler à nouveau
.B nanosleep
afin de terminer la pause.

La structure
.I timespec
est utilisée pour indiquer l'intervalle de temps en nano-secondes.
Elle est définie dans
.I <time.h>
et a la forme suivante
.sp
.RS
.nf
.ne 12
.ta 8n 16n 32n
struct timespec
{
	time_t	tv_sec;			/* secondes */
	long	tv_nsec;		/* nano-secondes */
};
.ta
.fi
.RE
.PP
La valeur du champ nano-seconde doit être dans l'intervalle 0 à 999\ 999\ 999.

Par rapport à
.BR sleep  (3)
et
.BR usleep (3),
.B nanosleep
a l'avantage de n'affecter aucun signal, d'être au standard POSIX,
de fournir une meilleure résolution, et de permettre de continuer facilement
un sommeil interrompu par un signal.
.SH ERREURS
En cas d'erreur ou d'interruption, l'appel système
.B nanosleep
renvoie \-1 et place dans
.I errno
une des valeurs suivantes\ :
.TP
.B EINTR
La pause a été interrompue par un signal non-bloqué délivré au
processus. Le temps restant de sommeil a été inscrit dans
*\fIrem\fR pour que le processus puisse terminer facilement son
sommeil.
.TP
.B EINVAL
La valeur du champ
.I tv_nsec
n'est pas dans l'intervalle 0 à 999\ 999\ 999 ou
.I tv_sec
est négatif.
.SH BOGUES
L'implémentation actuelle de
.B nanosleep
est construite sur le mécanisme de temporisation du noyau, qui
dispose d'une résolution valant 1/\fIHZ\fR\ s
(10\ ms sur Linux/i386 et 1\ ms sur Linux/Alpha).
Ainsi,
.B nanosleep
dormira toujours pour une durée au moins égale au temps spécifié,
mais il peut prendre jusqu'à 10 ms de plus (i386) avant de faire
redémarrer le processus.
Pour la même raison, la valeur retournée dans *\fIrem\fR en cas
d'interruption par un signal est arrondie au multiple supérieur
de 1/\fIHZ\fR\ s.

Certaines applications nécessitant des pauses plus précises
(par exemple pour le contrôle de périphériques matériels
avec un délai critique),
.B nanosleep
peut aussi offrir des pauses avec une précision plus élevée.
Si le processus est mis sous le contrôle d'un ordonnanceur
temps réel comme
.I SCHED_FIFO
ou
.IR SCHED_RR ,
les pauses jusqu'à 2\ ms seront effectuées avec des boucles actives
d'une précision de l'ordre de la micro-seconde.

.SH CONFORMITÉ
POSIX.1b (anciennement POSIX.4).
.SH "VOIR AUSSI"
.BR sleep (3),
.BR usleep (3),
.BR sched_setscheduler (2),
.BR timer_create (2)
.SH TRADUCTION
.PP
Ce document est une traduction réalisée par Christophe Blaess
<http://www.blaess.fr/christophe/> le 14\ octobre\ 1996
et révisée le 2\ mai\ 2006.
.PP
L'équipe de traduction a fait le maximum pour réaliser une adaptation
française de qualité. La version anglaise la plus à jour de ce document est
toujours consultable via la commande\ : «\ \fBLANG=en\ man\ 2\ nanosleep\fR\ ».
N'hésitez pas à signaler à l'auteur ou au traducteur, selon le cas, toute
erreur dans cette page de manuel.
